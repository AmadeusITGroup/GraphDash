(function(){var a,b=[].slice;a=function(a){var b,c;return a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search),null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),$(document).ready(function(){var c,d,e;$.widget("ui.autocomplete",$.ui.autocomplete,{options:{maxItems:9999},_renderMenu:function(a,b){var c,d;d=this,c=0,$.each(b,function(b,e){c<d.options.maxItems&&d._renderItemData(a,e),c++})}}),window.onpopstate=function(a){var b,c;a&&(b=window.location.href.slice(0,-1),c=window.location.origin,(b===c||window.location.search)&&location.reload())},Handlebars.registerHelper("withObj",function(a,b){return b.fn(a[b.hash.key])}),Handlebars.registerHelper("uri",function(a){return encodeURI(a)}),Handlebars.registerHelper("generate_parents",function(a,b){var c,d,e,f,g,h;if(a){for(c=a.split("/"),g="",d=e=0,f=c.length;0<=f?e<f:e>f;d=0<=f?++e:--e)h=c.slice(0,+d+1||9e9).join("/"),g+=b.fn({up_url:h,up_name:b.hash.aliases[h]});return g}}),e=Handlebars.compile($("#response-template").html()),$("#box").on("input",function(){return $(this).addClass("notsubmitted")}),$("#form").submit(function(a){var b;return $("#box").removeClass("notsubmitted"),$("#box").blur().focus(),b=encodeURIComponent($("#box").val().trim()),$.ajax({url:URL_SEARCH,type:"get",data:"value="+b}).done(function(a,c,d){a.url=URL_FAMILY,$("#response").html(e(a)),history.pushState({},"Title",URL_FAMILY+"?search="+b)}),!1}),$("#clearbutton").click(function(){$("#response").html(""),$("#box").removeClass("notsubmitted"),$("#box").val(""),history.pushState({},"Title","/")}),$("#searchbutton").click(function(){$("#form").submit()}),d=RegExp(" \\s*"),$.ajax({url:URL_TAGS,type:"get"}).done(function(a,c,e){var f,g;g=b.call(a.tags).concat(b.call(function(){var b,c,d,e;for(d=a.tags,e=[],b=0,c=d.length;b<c;b++)f=d[b],e.push("-"+f);return e}())),$("#box").autocomplete({minLength:0,maxItems:20,focus:function(a,b){var c;return c=this.value.split(d),c.pop(),c.push(b.item.value),this.value=c.join(" "),!1},source:function(a,b){return b($.ui.autocomplete.filter(g,a.term.split(d).pop()))},select:function(a,b){return this.value=this.value+" ",$("#form").submit(),!1}})}),$("input:text, textarea").each(function(){var a;a=$(this),a.data("placeholder",a.attr("placeholder")).focus(function(){a.removeAttr("placeholder")}).blur(function(){a.attr("placeholder",a.data("placeholder"))})}),c=a("search"),""!==c&&($("#box").val(c),$("#form").submit())})}).call(this);
//# sourceMappingURL=index.min.js.map